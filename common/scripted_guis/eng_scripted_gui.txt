scripted_gui={
eng_commonwealth_gui ={
	window_name= "eng_commonwealth_gui_window"
	context_type= player_context
	#OR={
	#tag=ENG
	#has_autonomy_state = autonomy_british_dominion
	#}
	
	visible={
	#always=yes
	has_country_flag=opened_commonwealth_gui
	}
	dynamic_lists = {
	members_of_commonwealth_gridbox={
		array=global.british_commonwealth_dominion
		entry_container = british_commonwealth_dominion_list_entry
		change_scope=yes
	
		ai_weights={
		appoint_gov_button_click={
		ai_will_do = {
	    modifier = {
		   factor = 20
          THIS={check_variable={effective_authority < 40}}
           }
       }
		}
		}
	}
	}
	effects={
	appoint_gov_button_click={
	ENG={set_variable={govcooldown=182}}
	THIS={country_event=commonwealth.2}
	ENG={country_event = { id =  commonwealth.4 days = 260 random_days = 5}}
	}
	eng_comm_close_button_click={
	clr_country_flag=opened_commonwealth_gui
	}
	
	eng_leave_comm_button_click={
	ENG={set_autonomy = {
    target = THIS
    autonomy_state = autonomy_free
    }
	if={
	limit={OR={tag=CAN tag=RAJ}}
	drop_cosmetic_tag = yes
	}
	THIS={ENG={country_event=commonwealth.1}}
	}
	}
	
	}
	triggers={
	appoint_gov_button_visible={
	ENG={check_variable={govcooldown < 1}}
	
	}
	appoint_gov_button_available={
	check_variable={govcooldown < 1}
	
	}
	eng_leave_comm_button_available={
	AND={
	NOT={tag=ENG}
	THIS={
	check_variable={loyalty_to_britain < 40}
	check_variable={effective_authority <35}
			}
		}
	}
	
	eng_leave_comm_button_visible={
	AND={
	NOT={tag=ENG}
	THIS={
	check_variable ={loyalty_to_britain < 40}
	check_variable= {effective_authority <35}
	}
	}
	}
	}
	properties={
	member_country_flag={
	image=[THIS.GetFlag]
	}
	large_flag = {
	image=[ENG.Getflag]
	}
	}
	ai_enabled={
	always=yes
	}
	ai_test_interval=290
	ai_test_variance=0.5
	ai_check={
	
	}
	
	ai_check_scope={
	
	}
	
ai_weights = {
	
   eng_leave_comm_button_click = {
   
       ai_will_do = {
	    modifier = {
		   factor = 50
          check_variable={loyalty_to_britain < 40}
           }
       }
   }
}
	
	

}